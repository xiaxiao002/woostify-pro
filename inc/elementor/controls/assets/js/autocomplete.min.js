"use strict";var woostifyAutocompleteSearchDelay=function(e){var o=0<arguments.length&&void 0!==e?e:0;return function(e,t){clearTimeout(o),o=setTimeout(e,t)}}(),woostifyAutocompleteRender=function(){var t,o,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"post_type",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"product",c=2<arguments.length?arguments[2]:void 0,e=c.el.querySelector(".wty-autocomplete");e&&c.getControlValue().length&&(t=c.el.querySelector(".elementor-control-title"),e={action:(o=e.querySelector(".wty-autocomplete-selection")).querySelector(".wty-autocomplete-selected").name,security_nonce:woostify_autocomplete.nonce,selected_id:c.getControlValue(),query:n,value:a},t&&t.insertAdjacentHTML("beforeend",'<i class="eicon-spinner eicon-animation-spin"></i>'),e=new URLSearchParams(e).toString(),e=new Request(ajaxurl,{method:"POST",body:e,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})}),fetch(e).then(function(e){200===e.status?e.json().then(function(e){e.success&&e.data&&(o.insertAdjacentHTML("afterbegin",e.data),woostifyAutocomplete(n,a,c))}):console.log("Status Code: "+e.status)}).catch(function(e){console.log(e)}).finally(function(){var e;!t||(e=t.querySelector(".eicon-spinner"))&&e.remove()}))},woostifyAutocomplete=function(){var c,i,r,l,s,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"post_type",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"product",u=2<arguments.length?arguments[2]:void 0,d=u.el.querySelector(".wty-autocomplete");d&&(c=d.querySelector(".wty-autocomplete-selection"),i=c.querySelector(".wty-autocomplete-search"),r=d.querySelector(".wty-autocomplete-dropdown"),l=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=c.querySelectorAll(".wty-autocomplete-id"),o=[];if(t.forEach(function(e){e=Number(e.getAttribute("data-id"));e&&!o.includes(e)&&o.push(e)}),!0===e)return o;u.setValue(o)},(s=function(){var e=c.querySelectorAll(".wty-autocomplete-id");e.length&&e.forEach(function(t){var o=t.getAttribute("data-id"),e=t.querySelector(".wty-autocomplete-remove-id");e&&(e.onclick=function(){var e;t.parentNode&&(d.classList.add("active"),(e=r.querySelector('[data-id="'+o+'"]'))&&e.classList.remove("disabled"),t.remove(),l())})})})(),i&&i.addEventListener("input",function(){var e=i.value.trim(),t={action:i.name,security_nonce:woostify_autocomplete.nonce,keyword:e,query:n,value:a},t=new URLSearchParams(t).toString(),o=new Request(ajaxurl,{method:"POST",body:t,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});e.length<1?r.innerHTML="":(r.innerHTML='<span class="wty-autocomplete-searching">'+woostify_autocomplete.searching+"</span>",woostifyAutocompleteSearchDelay(function(){fetch(o).then(function(e){200===e.status?e.json().then(function(e){if(e.success){var e=(new DOMParser).parseFromString(e.data,"text/html"),t=e.querySelectorAll(".wty-autocomplete-id"),o=(t.length&&t.forEach(function(e){var t=Number(e.getAttribute("data-id"))||"",o=l(!0)||[];o.length&&(o.includes(t)?e.classList.add("disabled"):e.classList.remove("disabled"))}),r.innerHTML=e.body.innerHTML,r.querySelectorAll(".wty-autocomplete-id"));if(o.length)for(var n=0,a=o.length;n<a;n++)o[n].onclick=function(){var e=this,t=e.classList.contains("disabled"),o=e.getAttribute("data-id");t||(r.innerHTML="",i.value="",e.classList.add("disabled"),t='<span class="wty-autocomplete-id" data-id="'+o+'">'+e.innerHTML+'<i class="wty-autocomplete-remove-id eicon-close-circle"></i></span>',c.insertAdjacentHTML("afterbegin",t),l(),s())}}}):console.log("Status Code: "+e.status)}).catch(function(e){r.innerHTML="",console.log(e)})},500))}))},woostifyAutocompleteData={onReady:function(){var e=this.model.get("query"),t=e.type,e=e.name;woostifyAutocompleteRender(t,e,this),woostifyAutocomplete(t,e,this)}},woostifyAutocompleteControl=elementor.modules.controls.BaseData.extend(woostifyAutocompleteData);elementor.addControlView("autocomplete",woostifyAutocompleteControl);