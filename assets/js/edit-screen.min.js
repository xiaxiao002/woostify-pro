"use strict";var woostifySearchDelay=function(e){var o=0<arguments.length&&void 0!==e?e:0;return function(e,t){clearTimeout(o),o=setTimeout(e,t)}}(),woostifyMultiSelect=function(){var e=document.querySelectorAll(".woostify-multi-selection");e.length&&e.forEach(function(n){function a(){var e=l.querySelectorAll(".woostify-multi-select-id");if(e.length)for(var t=0,o=e.length;t<o;t++)e[t].onclick=function(){var e=this,t=e.classList.contains("disabled"),o=e.getAttribute("data-id");t||(e.classList.add("disabled"),t='<span class="woostify-multi-select-id" data-id="'+o+'">'+e.innerHTML+'<i class="woostify-multi-remove-id dashicons dashicons-no-alt"></i></span>',i.insertAdjacentHTML("afterbegin",t),r(),d())}}var s=n.querySelector(".woostify-multi-select-value"),c=n.querySelector(".woostify-multi-select-selection"),i=c.querySelector(".woostify-multi-selection-inner"),e=c.querySelector(".woostify-multi-select-search"),l=n.querySelector(".woostify-multi-select-dropdown"),r=function(e){var t=i.querySelectorAll(".woostify-multi-select-id");if(t.length){var o=[];if(t.forEach(function(e){e=e.getAttribute("data-id");e&&!o.includes(e)&&o.push(e)}),!0===e)return o;s.value=o.join("|")}else s.value="default"},d=function(){var e=i.querySelectorAll(".woostify-multi-select-id");e.length&&e.forEach(function(t){var o=t.getAttribute("data-id"),e=t.querySelector(".woostify-multi-remove-id");e&&(e.onclick=function(){var e;t.parentNode&&(n.classList.add("active"),(e=l.querySelector('[data-id="'+o+'"]'))&&e.classList.remove("disabled"),t.remove(),r())})})};d();e&&(e.addEventListener("input",function(){var e=this,t=e.getAttribute("data-nonce"),o=e.value.trim(),s=e.name,e=e.getAttribute("data-search"),i=new Request(ajaxurl,{method:"POST",body:"action="+s+"&security_nonce="+t+"&keyword="+o,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});"immediate"===e?a():o.length<1?l.innerHTML="":woostifySearchDelay(function(){fetch(i).then(function(e){200===e.status?e.json().then(function(e){var t;e.success&&((t=(e=(new DOMParser).parseFromString(e.data,"text/html")).querySelectorAll(".woostify-multi-select-id")).length&&t.forEach(function(e){var t=e.getAttribute("data-id")||"",o=r(!0)||[];o.length&&(o.includes(t)?e.classList.add("disabled"):e.classList.remove("disabled"))}),l.innerHTML=e.body.innerHTML,a())}):console.log("Status Code: "+e.status)}).catch(function(e){l.innerHTML="",console.log(e)})},500)}),e.addEventListener("focus",function(e){n.classList.add("active"),d(),"immediate"===this.getAttribute("data-search")&&a()})),document.addEventListener("click",function(e){var e=e.target,t=e.closest(".woostify-multi-selection"),o=e.classList.contains("woostify-multi-remove-id"),s=e.classList.contains("woostify-multi-select-id"),i=e.classList.contains("woostify-multi-select-search");t==n&&(c===e||o||s||i)||n.classList.remove("active")})})},prevSiblings=function(e){for(var t=[],o=e;o=o.previousElementSibling;)t.push(o);return t},nextSiblings=function(e){for(var t=[],o=e;o=o.nextElementSibling;)t.push(o);return t},siblings=function(e){var t=prevSiblings(e)||[],e=nextSiblings(e)||[];return t.concat(e)},woostifyMultiDependency=function(){var e=document.querySelectorAll(".woostify-multi-dependency");e.length&&e.forEach(function(a){var e=a.querySelectorAll(".woostify-multi-dependency-item [name]");e.length&&e.forEach(function(i,o){var n=i.closest(".woostify-multi-dependency-item");n.getAttribute("data-dependency")&&i.addEventListener("change",function(){var s=i.value,e=parseInt(o)+1,e=a.querySelectorAll(".woostify-multi-dependency-item:nth-child("+e+') ~ .woostify-multi-dependency-item[data-required="'+s+'"]'),t=siblings(n);t.length&&t.forEach(function(e){e.getAttribute("data-required")&&e.classList.remove("active")}),e.length&&e.forEach(function(e){var t=e.getAttribute("data-required"),o=(e.getAttribute("data-value"),new Event("change"));e.querySelector("[name]").dispatchEvent(o),"checkbox"==i.type?i.checked?e.classList.add("active"):e.classList.remove("active"):s==t?e.classList.add("active"):e.classList.remove("active")})})})})},woostifyUpdateValue=function(){var e=document.querySelector(".woostify-featured-setting");!e||(e=e.querySelectorAll('[type="checkbox"]')).length&&e.forEach(function(e){e.onchange=function(){e.value=1==e.value?0:1}})},woostifyDependency=function(){var e=document.querySelectorAll(".woostify-filter-value");e.length&&e.forEach(function(o){o.addEventListener("change",function(){var e=o.closest(".woostify-filter-item"),e=nextSiblings(e);e.length&&o.value.trim()&&e.forEach(function(e){var t=e.getAttribute("data-type");t&&("checkbox"===o.type?o.checked&&t==o.value?e.classList.remove("hidden"):e.classList.add("hidden"):t.includes(o.value)?e.classList.remove("hidden"):e.classList.add("hidden"))})})})},woostifyTabSettings=function(){var e,i=document.querySelector(".woostify-settings-section-tab");!i||(e=i.querySelectorAll(".tab-head-button")).length&&(e.forEach(function(s){s.onclick=function(){var e=s.hash?s.hash.substr(1):"",t=siblings(s),e=i.querySelector('.woostify-setting-tab-content[data-tab="'+e+'"]'),o=siblings(e);s.classList.add("active"),t.length&&t.forEach(function(e){e.classList.remove("active")}),e.classList.add("active"),o.length&&o.forEach(function(e){e.classList.remove("active")})}}),window.addEventListener("load",function(){var e=i.querySelector('a[href="'+window.location.hash+'"]'),t=i.querySelector('a[href="#general"]');e?e.click():t&&t.click()}))},woostifySaveOptions=function(){var r,d,e,u=document.querySelector(".woostify-featured-setting");u&&(r=u.getAttribute("data-id")||"",d=u.getAttribute("data-nonce")||"",(e=u.querySelectorAll(".save-options")).length&&r&&d&&e.forEach(function(l){l.onclick=function(){if(!l.getAttribute("disabled")&&!u.classList.contains("loading")){var e=this,t=r.replace(/-/g,"_"),o=u.querySelectorAll("[name*=woostify_"+t+"]"),s={},i=u.querySelectorAll('[required="required"]'),n=!1;if(u.classList.contains("woostify-ajax-search-product-setting")){var a=u.querySelector(".must-choose-one-option"),c=!!a&&a.querySelector('[type="checkbox"]');if(!(a?a.querySelectorAll('[type="checkbox"]:checked'):[]).length&&c)return void c.focus()}i.length&&i.forEach(function(e){var t=e.value.trim(),o=e.closest(".woostify-setting-tab-content"),s=e.closest(".woostify-filter-item.hidden"),o=o?o.getAttribute("data-tab"):"";s||t||((s=u.querySelector('a[href="#'+o+'"]'))&&!s.classList.contains("active")&&s.click(),n=!0,e.focus())}),n||(u.classList.add("loading"),e.setAttribute("disabled","disabled"),e.innerHTML=woostify_edit_screen.saving+"...",o.length&&o.forEach(function(e,t){e.value.trim()&&(e.name.includes("[]")?s[e.name+"["+t+"]"]=e.value:s[e.name]=e.value)}),a=new Request(ajaxurl,{method:"POST",body:"action=woostify_save_"+t+"_options&security_nonce="+d+"&setting_id="+r+"&options="+JSON.stringify(s),credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})}),fetch(a).then(function(e){200===e.status?(u.querySelector(".woostify-settings-section-footer .info-seuccess")||l.insertAdjacentHTML("afterend",'<span class="info-seuccess">'+woostify_edit_screen.saved_success+"</span>"),u.classList.remove("loading")):console.log("Status Code: "+e.status)}).catch(function(){u.classList.remove("loading")}).finally(function(){e.innerHTML=woostify_edit_screen.saved,setTimeout(function(){e.innerHTML=woostify_edit_screen.save,e.removeAttribute("disabled")},1e3)}))}}}))},woostifySaleNotificationRemoveMessage=function(){var e,t=document.querySelector(".woostify-sale-notification-box-message");!t||(e=t.querySelectorAll(".woostify-sale-notification-remove-message")).length&&(e.forEach(function(e){e.onclick=function(){var e;"disabled"!==(this.getAttribute("disabled")||"")&&(this.parentNode.remove(),t.querySelectorAll(".woostify-sale-notification-remove-message").length<=1&&(e=new Event("lastMessage"),document.documentElement.dispatchEvent(e)))}}),document.documentElement.addEventListener("lastMessage",function(){var e=t.querySelector(".woostify-sale-notification-remove-message");e&&e.setAttribute("disabled","disabled")}))},woostifySaleNotificationAddNewMessage=function(){var e=document.querySelector(".woostify-featured-setting"),t=!!e&&document.querySelector(".woostify-sale-notification-box-message"),o=t?t.querySelector(".woostify-sale-notification-message-inner"):"",s=o?o.querySelector(".woostify-sale-notification-remove-message").innerHTML:"",i='<div class="woostify-sale-notification-message-inner">',i=(i+='<textarea name="woostify_sale_notification_message[]" required="required"></textarea>')+('<span class="woostify-sale-notification-remove-message button">'+s+"</span>")+"</div>";e&&t&&o&&((s=e.querySelector(".woostify-sale-notification-add-message"))&&(s.onclick=function(){t.insertAdjacentHTML("beforeend",i),woostifySaleNotificationRemoveMessage();var e=t.querySelector(".woostify-sale-notification-message-inner:last-of-type"),e=!!e&&e.querySelector("textarea"),e=(e&&e.focus(),t.querySelector('.woostify-sale-notification-remove-message[disabled="disabled"]'));e&&e.removeAttribute("disabled")}))},woostifyHeaderFooterBuilderSelectTemplate=function(){var e=document.getElementById("woostify-header-footer-builder-template");e&&e.addEventListener("change",function(){var e,t,o=this.value;"default"===o?this.closest(".input-wrapper").nextElementSibling.remove():(e=this.closest(".input-wrapper"),e=nextSiblings(e),t=document.getElementById("woostify-hfb-nonce").value,0===e.length&&(e=new Request(ajaxurl,{method:"POST",body:"action=woostify_pro_select_template&_ajax_nonce="+t+"&template="+o,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})}),fetch(e).then(function(e){200===e.status?e.json().then(function(e){e.success&&""!==e.data&&(e=(new DOMParser).parseFromString(e.data,"text/html").querySelector(".input-wrapper"),document.querySelector(".woostify-pro-hfb-options-wrapper").append(e))}):console.log("Status Code: "+e.status)})),null!==(t=document.querySelector(".condition-group.sticky"))&&("header"===o?t.classList.contains("hidden")&&t.classList.remove("hidden"):t.classList.contains("hidden")||t.classList.add("hidden")))})},woostifyChangeDisplayOption=function(){var i;document.getElementById("woostify-hfb-nonce")&&(i=document.getElementById("woostify-hfb-nonce").value,document.addEventListener("change",function(e){var t,o=e.target,e=o.getAttribute("id");"woostify-header-footer-builder-display-on"!==e&&"woostify-header-footer-builder-no-display-on"!==e||(t=o.options[o.selectedIndex].value,t=new Request(ajaxurl,{method:"POST",body:"action=woostify_pro_load_autocomplete&_ajax_nonce="+i+"&post_type="+t+"&type="+("woostify-header-footer-builder-no-display-on"===e?"no_display_on":"display_on"),credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})}),fetch(t).then(function(e){200===e.status?e.json().then(function(e){e.success&&(o.closest(".condition-group").getElementsByClassName("child-item")[0].innerHTML=e.data)}):console.log("Status Code: "+e.status)}))}),document.addEventListener("click",function(e){var t,o,s,i,n,e=e.target||e.currentTarget;e.getAttribute("class");if(e.classList.contains("woostify-select-all-post")||e.classList.contains("woostify-arrow")||e.classList.contains("woostify-select-all")){for(var a,c,d=(a=e.closest(".woostify-section-select-post")).children.length,l=0;l<d;l++)if(a.children[l].classList.contains("woostify-section-render--post")){c=a.children[l];break}c.classList.contains("hidden")?(c.classList.remove("hidden"),a.classList.remove("select-all"),a.classList.add("render--post"),a.getElementsByClassName("woostify--hf-post-name")[0].focus()):(c.classList.add("hidden"),a.classList.remove("render--post"),a.classList.add("select-all"))}if(e.classList.contains("woostify-auto-complete-field")&&e.querySelector(".woostify--hf-post-name").focus(),e.classList.contains("post-item")&&!e.classList.contains("disabled")&&(o=(t=e.closest(".input-item-wrapper")).querySelector(".woostify-post-ids").value,n=t.querySelector(".woostify-select-all-post"),s=t.querySelector(".woostify-section-select-post"),n.classList.contains("hidden")||n.classList.add("hidden"),o=o&&"all"!==o?o.split(","):[],s.classList.contains("has-option")||s.classList.add("has-option"),n=e.getAttribute("data-item"),s=e.textContent,o.includes(n)||(o.push(n),s='<span class="woostify-title">'+s+'</span><span class="btn-woostify-auto-complete-delete ion-close" data-item="'+n+'"></span>',(i=document.createElement("span")).classList.add("woostify-auto-complete-key"),i.innerHTML=s,t.querySelector(".woostify-auto-complete-field").insertBefore(i,t.querySelector(".woostify--hf-post-name"))),t.querySelector(".woostify-post-ids").value=o,t.querySelector(".woostify--hf-post-name").value="",e.classList.add("disabled")),e.classList.contains("btn-woostify-auto-complete-delete")&&(n=e.getAttribute("data-item"),o=(t=e.closest(".input-item-wrapper")).querySelector(".woostify-post-ids").value,c=t.querySelector(".woostify-section-render--post"),s=t.querySelector(".woostify-select-all-post"),a=t.querySelector(".woostify-section-select-post"),t.closest(".condition-group"),""!==(o=o&&"all"!==o?(o=o.replace(","+n,"")).replace(n,""):[])&&null!=o||(o="all",c.classList.add("hidden"),a.classList.remove("render--post"),a.classList.add("select-all"),a.classList.remove("has-option"),s.classList.remove("hidden"),t.querySelector(".woostify-data").innerHTML=""),t.querySelector(".woostify-post-ids").value=o,e.parentElement.remove()),"woostify-header-template-sticky"===e.getAttribute("name")&&(i=document.querySelector('input[name="woostify-header-template-sticky"]').checked,n=e.closest(".condition-group").querySelector(".child-item"),i?n.classList.contains("hidden")&&n.classList.remove("hidden"):n.classList.contains("hidden")||n.classList.add("hidden")),0<document.querySelectorAll(".woostify--hf-post-name").length)for(var u=document.querySelectorAll(".woostify--hf-post-name"),f=u.length,r=0;r<f;r++)u[r].value="";if(0<document.querySelectorAll(".woostify-data").length)for(var y=document.querySelectorAll(".woostify-data"),m=y.length,h=0;h<m;h++)y[h].innerHTML=""}),document.addEventListener("keyup",function(e){var t,o,s,e=e.target;e.classList.contains("woostify--hf-post-name")&&(s=(t=e.closest(".input-item-wrapper")).querySelector(".woostify-post-type").value,o=t.querySelector(".woostify-post-ids").value,e=e.value,s=new Request(ajaxurl,{method:"POST",body:"action=woostify_pro_load_post&_ajax_nonce="+i+"&post_type="+s+"&key="+e+"&selected="+o,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})}),fetch(s).then(function(e){200===e.status?e.json().then(function(e){e.success&&(t.getElementsByClassName("woostify-data")[0].innerHTML=e.data)}):console.log("Status Code: "+e.status)}))}))};document.addEventListener("DOMContentLoaded",function(){"function"==typeof woostifyMoveWordpressUpdateVersionNotice&&woostifyMoveWordpressUpdateVersionNotice(),woostifyMultiSelect(),woostifyDependency(),woostifyMultiDependency(),woostifyUpdateValue(),woostifyTabSettings(),woostifySaveOptions(),woostifySaleNotificationAddNewMessage(),woostifySaleNotificationRemoveMessage(),woostifyHeaderFooterBuilderSelectTemplate(),woostifyChangeDisplayOption()});