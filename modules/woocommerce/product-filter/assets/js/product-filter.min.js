"use strict";function ownKeys(t,e){var o,r=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var woostifyFilterDatePicker=function(){var e=document.querySelector(".w-product-filter[data-type=date-range] .w-product-filter-inner");if(e)for(var t={mode:"dp-below"},o=("undefined"!=typeof woostify_datepicker_data&&(t.lang={},t.lang.months=woostify_datepicker_data.months,t.lang.days=woostify_datepicker_data.days,t.lang.today=woostify_datepicker_data.today,t.lang.clear=woostify_datepicker_data.clear,t.lang.close=woostify_datepicker_data.close),e.querySelectorAll(".w-filter-date-picker")),r=0,i=o.length;r<i;r++)0,TinyDatePicker(o[r],t)},woostifyToggleFilterHorizontal=function(){var e=document.querySelectorAll(".filter-area.filter-horizontal .w-product-filter .widget-title, .w-pro-smart-filter-layout-horizontal .elementor-widget-container .widget-title"),o=document.querySelectorAll(".filter-area.filter-horizontal .w-product-filter, .w-pro-smart-filter-layout-horizontal .elementor-widget-container .w-product-filter");e.length&&e.forEach(function(t){t.onclick=function(){var e=t.parentNode;e.classList.contains("open")?e.classList.remove("open"):(o.forEach(function(e){e.classList.remove("open")}),e.classList.add("open"))}})},woostifyToggleFilter=function(){var e=document.querySelectorAll(".w-product-filter:not(.no-collapse) .widget-title");e.length&&e.forEach(function(r){var e=r.closest(".w-product-filter"),t=r,o=e.querySelector(".w-product-filter-inner"),i=e.getAttribute("data-collapse");e.style.transitionDuration="300ms",e.style.height=null===i?t.getBoundingClientRect().height+o.getBoundingClientRect().height+"px":t.getBoundingClientRect().height+"px",r.onclick=function(){var e,t=r.parentNode,o=t.querySelector(".w-product-filter-inner");null===t.getAttribute("data-collapse")?(t.classList.remove("is-opening"),t.classList.add("is-closing"),e=r.getBoundingClientRect().height,t.style.height=e+"px",setTimeout(function(){t.classList.contains("is-closing")&&t.setAttribute("data-collapse",""),t.classList.remove("is-closing")},300)):(t.classList.remove("is-closing"),t.classList.add("is-opening"),e=r.getBoundingClientRect().height,t.setAttribute("data-collapse",""),o=o.getBoundingClientRect().height,t.removeAttribute("data-collapse"),t.style.height=e+o+"px",setTimeout(function(){t.classList.remove("is-opening")},300))}})},woostifyToggleChildTerm=function(){var e=document.querySelectorAll('[data-type="checkbox"] .w-filter-item-depth');e.length&&(e.forEach(function(e){var t=e.previousElementSibling;t&&(e=e.classList.contains("visible")?woostify_product_filter.collapse_icon:woostify_product_filter.expand_icon,t.insertAdjacentHTML("beforeend",'<span class="expand-btn">'+e+"</span>"))}),(e=document.querySelectorAll('[data-type="checkbox"] .expand-btn')).length&&e.forEach(function(o){var e=o.closest(".w-filter-item-wrap");e&&(e.classList.add("is-parent-item"),o.onclick=function(){o.innerHTML=woostify_product_filter.expand_icon===o.innerHTML?woostify_product_filter.collapse_icon:woostify_product_filter.expand_icon;var e,t=o.closest(".w-filter-item-wrap");!t||(t=t.nextElementSibling)&&t.classList.contains("w-filter-item-depth")&&(t.classList.contains("visible")?t.classList.remove("visible"):t.classList.add("visible"),(t=o.closest(".w-product-filter ")).style.height="auto",e=t.getBoundingClientRect().height,t.style.height=e+"px")})}))},woostifyToggleSoftLimit=function(){var e=document.querySelectorAll(".w-product-filter .w-filter-toggle-btn");e.length&&e.forEach(function(o){o.onclick=function(){var e,t=o.parentNode.querySelector(".w-filter-item-overflow");t&&((e=o.parentNode.querySelector(".w-filter-toggle-btn.w-filter-hidden"))&&e.classList.remove("w-filter-hidden"),o.classList.add("w-filter-hidden"),t.classList.contains("w-filter-hidden")?t.classList.remove("w-filter-hidden"):t.classList.add("w-filter-hidden"),(e=o.closest(".w-product-filter ")).style.height="auto",t=e.getBoundingClientRect().height,e.style.height=t+"px")}})},woostifyUpdateFilters=function(e){for(var t in e)Array.isArray(e[t])&&!e[t].length&&delete e[t];return Object.keys(e).length?(1===Object.keys(e).length?void 0===e.first_active_filter?e.first_active_filter=Object.keys(e)[0]:delete e.first_active_filter:void 0!==(o=e.first_active_filter)&&void 0===e[o]&&delete e.first_active_filter,e):{};var o},woostifyBuildQueryString=function(e){for(var t=woostify_product_filter.filters_url,o=Object.keys(e),r={},i=0,n=o.length;i<n;i++)void 0!==t[o[i]]&&(r[t[o[i]]]=e[o[i]]);return r},woostifyFilterQuickSearch=function(){var e=document.querySelectorAll(".w-filter-quick-search");e.length&&e.forEach(function(i){var e,n=i.parentNode.querySelectorAll(".w-filter-item-wrap");n.length&&((e=function(){for(var e=0,t=n.length;e<t;e++){var o,r=n[e].querySelector(".w-filter-item-name");r&&(o=i.value.toUpperCase(),r.innerText.toUpperCase().includes(o)?n[e].style.display="":n[e].style.display="none")}})(),i.addEventListener("input",e))})},mergeTooltips=function(y,w,g){var h=y.noUiSlider.getTooltips();h.forEach(function(e){e.style.transition="none"}),y.noUiSlider.on("update",function(e,s,u,f,t){var r=y.querySelector(".noUi-base .mergeTooltip"),o=(r||((r=document.createElement("div")).setAttribute("class","noUi-tooltip mergeTooltip"),r.style.visibility="hidden",y.querySelector(".noUi-base").appendChild(r)),[[]]),i=[[]],n=[[]],c=0;h[0]&&(o[0][0]=0,i[0][0]=t[0],n[0][0]=e[0]);for(var l=1,a=t.length;l<a;l++){var d=h[l].getBoundingClientRect(),p=h[l-1].getBoundingClientRect();(!h[l]||p.right-d.left+w<0)&&(o[++c]=[],n[c]=[],i[c]=[]),h[l]&&(o[c].push(l),n[c].push(e[l]),i[c].push(t[l]))}o.length<=1?(o.forEach(function(e,t){var o=(i[t][0]+i[t][1])/2,t=n[t].filter(function(e,t,o){return o.indexOf(e)===t});r.innerHTML=t.join(g),r.style.visibility="visible",r.style.transform="translate(-50%, -44%)",r.style.left=o+"%",r.style.transition="none"}),h.forEach(function(e){e.style.visibility="hidden"})):(r.style.visibility="hidden",h.forEach(function(e){e.style.visibility="visible"}))})},woostifyAjaxFilter=function(){var d,r,s,i,c,u,n,y,l,w,f,p,g,h,m,v,b,e=document.querySelectorAll(".w-product-filter[data-type]"),a=document.querySelector(".w-result-filter");e.length&&a&&(d=document.querySelector(".w-filter-key"),a.querySelector(".products"),e=document.getElementById("wpadminbar"),r=e?e.offsetHeight:0,s=Array.isArray(woostify_product_filter.active_params)?{}:woostify_product_filter.active_params,i={},c=1,u=new CustomEvent("filtered",{detail:!0}),d&&woostify_product_filter.remove_key&&(d.innerHTML=woostify_product_filter.remove_key),(n=function(){var n=a.querySelectorAll(".woocommerce-pagination .page-numbers a.page-numbers");if(n.length)for(var e=0,t=n.length;e<t;e++)!function(i){n[i].onclick=function(e){e.preventDefault();var e=a.querySelector(".woocommerce-pagination .page-numbers .page-numbers.current"),t=n[i].classList.contains("prev"),o=n[i].classList.contains("next"),r=1;t&&e&&(r=Number(e.innerText)-1),o&&e&&(r=Number(e.innerText)+1),t||o||(r=Number(n[i].innerText)),c=r,document.body.dispatchEvent(new CustomEvent("filtered",{detail:!1}))}}(e)})(),(y=function(N,C){var e=document.querySelectorAll(".w-product-filter[data-type]");e.length&&e.forEach(function(j){var x=j.getAttribute("data-type"),O=j.getAttribute("data-id"),U="tmp_"+O,e=(window[U]||(window[U]=void 0===N[O]?[]:N[O]),i[O]=x,function(){switch(x){case"search":var o=j.querySelector(".w-product-filter-text-field"),t=j.querySelector(".w-product-filter-search-icon");if(!o||!t)return{v:void 0};o.onkeyup=function(e){13===e.keyCode&&t.click()},t.onclick=function(){var e=o.value.trim(),t=o.getAttribute("data-value")||"";e&&t!=e&&(o.setAttribute("data-value",e),N[O]=e,document.body.dispatchEvent(C))};break;case"date-range":var r=j.querySelector("[data-from]"),s=j.querySelector("[data-to]"),u=j.querySelector(".w-filter-item-submit");if(!r||!s||!u)return{v:void 0};u.onclick=function(){var e;r.value&&s.value&&((e=[])[0]=r.value,e[1]=s.value,N[O]=e,document.body.dispatchEvent(C))};break;case"rating":var i=j.querySelectorAll(".w-filter-rating-item");if(!i.length)return{v:void 0};for(var f=0,p=i.length;f<p;f++)!function(t){i[t].onclick=function(){var e;i[t].classList.contains("selected")||((e=j.querySelector(".w-filter-rating-item.selected"))&&e.classList.remove("selected"),i[t].classList.add("selected"),N[O]=5-t,document.body.dispatchEvent(C))}}(f);break;case"sort-order":var y=j.querySelector(".w-product-filter-select-field.w-filter-ordering");if(!y)return{v:void 0};y.onchange=function(e){e.preventDefault(),N[O]=y.value,document.body.dispatchEvent(C)};break;case"select":var w=j.querySelector(".w-product-filter-select-field");if(!w)return{v:void 0};w.onchange=function(){N[O]=w.value,document.body.dispatchEvent(C)};break;case"radio":var n=j.querySelectorAll('[type="radio"]');if(!n.length)return{v:void 0};for(var g=0,h=n.length;g<h;g++)!function(e){n[e].onchange=function(){N[O]=n[e].parentNode.getAttribute("data-slug"),document.body.dispatchEvent(C)}}(g);break;case"range-slider":if(!j)break;var e=j.querySelector(".w-filter-range-slider");if(!e||"object"===_typeof(j.noUiSlider)||e.classList.contains("noUi-target"))break;var m=j.querySelector(".w-filter-range-slider-reset"),u=JSON.parse(e.getAttribute("data-start")),v=JSON.parse(e.getAttribute("data-range")),b=noUiSlider.create(e,{tooltips:!0,connect:!0,start:u,step:1,range:v,format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)}}});b.on("change",function(e,t,o,r,i,n){N["range-slider"]=n.options.range,N[O]=e,document.body.dispatchEvent(C)}),m&&(m.onclick=function(){var e,t=m.previousElementSibling;!t||(t=t.querySelector(".noUi-handle-upper"))&&(e=Number(t.getAttribute("aria-valuemin")||0),t=Number(t.getAttribute("aria-valuemax")||0),b.set([e,t]),delete N[O],document.body.dispatchEvent(C))}),mergeTooltips(e,2," - ");break;case"check-range":var c=j.querySelectorAll('[type="checkbox"]');if(!c.length)return{v:void 0};for(var S=0,_=c.length;S<_;S++)!function(e){c[e].onclick=function(){var t=c[e].parentNode.getAttribute("data-value");window[U].includes(t)?window[U]=window[U].filter(function(e){return e!==t}):window[U].push(t),N[O]=window[U],document.body.dispatchEvent(C)}}(S);break;case"checkbox":var l=j.querySelectorAll('[type="checkbox"]');if(!l.length)return{v:void 0};for(var k=0,q=l.length;k<q;k++)!function(e){l[e].onclick=function(){Number(l[e].parentNode.getAttribute("data-id"));var t=l[e].parentNode.getAttribute("data-slug");window[U].includes(t)?window[U]=window[U].filter(function(e){return e!==t}):window[U].push(t),N[O]=window[U],document.body.dispatchEvent(C)}}(k);break;case"stock":var a=j.querySelectorAll('[type="checkbox"]');if(!a.length)return{v:void 0};for(var A=0,L=a.length;A<L;A++)!function(e){a[e].onclick=function(){console.log(111);Number(a[e].parentNode.getAttribute("data-id"));var t=a[e].parentNode.getAttribute("data-slug");window[U].includes(t)?window[U]=window[U].filter(function(e){return e!==t}):window[U].push(t),N[O]=window[U],document.body.dispatchEvent(C)}}(A);break;case"visual":var d=j.querySelectorAll(".w-filter-item");if(!d.length)return{v:void 0};for(var E=0,T=d.length;E<T;E++)!function(e){d[e].onclick=function(){var t=Number(d[e].getAttribute("data-id"));window[U].includes(t)?(window[U]=window[U].filter(function(e){return e!==t}),d[e].classList.remove("selected")):(window[U].push(t),d[e].classList.add("selected")),N[O]=window[U],document.body.dispatchEvent(C)}}(E)}}());if("object"===_typeof(e))return e.v})})(s,u),(l=function(){var a=d?d.querySelectorAll(".w-filter-key-remove"):[];if(a.length)for(var e=0,t=a.length;e<t;e++)!function(l){a[l].onclick=function(){var e=a[l].getAttribute("data-id"),t=a[l].getAttribute("data-type"),o=a[l].getAttribute("data-value");if(t){switch(t){case"all":for(var r=Object.getOwnPropertyNames(s),i=0,n=r.length;i<n;i++)delete s[r[i]];var c=woostifyBuildQueryString(woostifyUpdateFilters(s)),c=_objectSpread(_objectSpread({},Object.fromEntries(new URLSearchParams(location.search))),c),c=new URLSearchParams(c).toString(),c=(Object.keys(s).length||(c=""),history.pushState&&history.pushState(null,null,c?"?"+c:window.location.pathname),a[l].parentNode.querySelectorAll("[data-id]"));c.length&&c.forEach(function(e){e=e.getAttribute("data-id");window["tmp_"+e]&&(window["tmp_"+e]=[])}),v(),w(),f(),p(),g(),h(),m(),b();break;case"sort-order":b(),delete s[e];break;case"search":f(),delete s[e];break;case"date-range":g(),delete s[e];break;case"check-range":if(!o)return;c=window["tmp_"+e];void 0!==c&&(c=c.filter(function(e){return e!==o}),window["tmp_"+e]=c,s[e]=c,(c=document.querySelector('.w-product-filter[data-id="'+e+'"] [data-value="'+o+'"] [type="checkbox"]:checked'))&&(c.checked=!1));break;case"range-slider":p(),delete s[e];break;case"rating":h(),delete s[e];break;case"select":c=document.querySelector('.w-product-filter[data-id="'+e+'"] .w-product-filter-select-field');c&&(c.value=""),delete s[e];case"radio":c=document.querySelector('.w-product-filter[data-id="'+e+'"] [data-id="'+o+'"] [type="radio"]:checked');c&&(c.checked=!1),delete s[e];break;case"checkbox":case"stock":case"visual":if(!o)return;var c=window["tmp_"+e];void 0!==c&&(c=c.filter(function(e){return e!==o}),window["tmp_"+e]=c,s[e]=c,c=woostifyBuildQueryString(woostifyUpdateFilters(s)),c=_objectSpread(_objectSpread({},Object.fromEntries(new URLSearchParams(location.search))),c),c=new URLSearchParams(c).toString(),Object.keys(s).length||(c=""),history.pushState&&history.pushState(null,null,c?"?"+c:window.location.pathname),(c=document.querySelector('.w-product-filter[data-id="'+e+'"] [data-id="'+o+'"] [type="checkbox"]:checked'))&&(c.checked=!1))}document.body.dispatchEvent(u)}}}(e)})(),w=function(){var e=document.querySelectorAll(".w-product-filter-select-field");e.length&&e.forEach(function(e){e.value=""})},f=function(){var e=document.querySelectorAll(".w-product-filter-text-field");e.length&&e.forEach(function(e){e.value=""})},p=function(){var e=document.querySelectorAll(".w-product-filter-type-range-slider");e.length&&e.forEach(function(e){"object"===_typeof(e.noUiSlider)&&e.noUiSlider.set(e.noUiSlider.options.start)})},g=function(){var e=document.querySelectorAll(".w-filter-date-picker");e.length&&e.forEach(function(e){e.value=""})},h=function(){var e=document.querySelector(".w-product-filter-type-rating .selected");e&&e.classList.remove("selected")},m=function(){var e=document.querySelectorAll('.w-product-filter-inner [type="checkbox"]:checked, .w-product-filter-inner [type="radio"]:checked');e.length&&e.forEach(function(e){e.checked=!1})},v=function(){var e=document.querySelectorAll(".w-filter-item.selected");e.length&&e.forEach(function(e){e.classList.remove("selected")})},b=function(){var e=document.querySelectorAll(".w-filter-ordering");e.length&&(e.value="")},document.body.addEventListener("filtered",function(e){var t=document.body.getBoundingClientRect().top,o=a.getBoundingClientRect().top,t=(o<r&&window.scrollTo({top:-1*t- -1*o-r,behavior:"smooth"}),document.querySelector("ul.products")),o=(t&&!t.querySelector(".filter-loading")&&t.insertAdjacentHTML("beforeend",'<span class="filter-loading"></span>'),e.detail&&(c=1),document.body.classList.add("filter-updating"),woostifyBuildQueryString(woostifyUpdateFilters(s))),t=Object.fromEntries(new URLSearchParams(location.search)),e=_objectSpread(_objectSpread({},t),o),o=new URLSearchParams(e).toString(),e=(history.pushState&&history.pushState(null,null,o?"?"+o:window.location.pathname),{action:"woostify_product_filter",ajax_nonce:woostify_product_filter.ajax_nonce,per_page:a.getAttribute("data-posts")||"",paged:c,term_id:woostify_product_filter.term_id,taxonomy:woostify_product_filter.taxonomy,list_filter:JSON.stringify(i),search_param:t.s||"",data:JSON.stringify(woostifyUpdateFilters(s))}),e=new URLSearchParams(e).toString(),o=new Request(woostify_product_filter.ajax_url,{method:"POST",body:e,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(o).then(function(e){if(200!==e.status)throw console.log("Status Code: "+e.status),e;return e.json()}).then(function(e){if(e.success){var t=e.data,e=a.querySelector(".woostify-sorting .woocommerce-result-count"),o=a.querySelector(".products"),r=a.querySelector(".woocommerce-pagination");document.querySelector(".shop-widget");if(e&&t.result_count&&(e.innerHTML=t.result_count),o&&(o.innerHTML=t.content),r&&(t.pagination?r.innerHTML=t.pagination:r.innerHTML=""),d&&(d.innerHTML=t.filtered),t.template)for(var i in t.template){var i=t.template[i],n=i.id,c=i.type,l=(new DOMParser).parseFromString(i.template,"text/html").querySelector(".w-product-filter"),c=document.querySelector('.w-product-filter[data-type="'+c+'"][data-id="'+n+'"]');i.template?c&&l&&(c.innerHTML=l.innerHTML,y(s,u)):c.innerHTML=""}woostifyToggleFilter(),woostifyToggleFilterHorizontal(),woostifyToggleChildTerm(),woostifyToggleSoftLimit(),woostifyFilterQuickSearch()}}).catch(function(e){console.log(e)}).finally(function(){document.body.classList.remove("filter-updating"),l(),n(),"function"==typeof woostifyInfiniteScroll&&void 0!==window.infScroll&&(window.infScroll.destroy(),woostifyInfiniteScroll(!1,function(){var e=window.location.hostname,t=window.location.protocol,o=window.location.pathname,r=this.loadCount+2,i=window.location.search.substring(1);return o.match(/(page\/)[0-9]+/)||(o=o+"page/"+r),""===i?t+"//"+e+o+"/":t+"//"+e+o+"/?"+i})),"function"==typeof woostifyQuickView&&woostifyQuickView(),woostifyFilterDatePicker()})}))},woostifyFilterOrdering=function(){var t,e=document.querySelector("form.woocommerce-ordering"),o=!!e&&e.querySelector("select.orderby"),r=document.querySelector("select.w-filter-ordering");o&&r&&(t=new CustomEvent("change"),o.addEventListener("change",function(e){e.preventDefault(),r.value=o.value,r.dispatchEvent(t)}),jQuery(".woocommerce-ordering").on("submit",function(e){e.preventDefault()}))};document.addEventListener("DOMContentLoaded",function(){woostifyAjaxFilter(),woostifyFilterDatePicker(),woostifyToggleFilter(),woostifyToggleFilterHorizontal(),woostifyToggleChildTerm(),woostifyToggleSoftLimit(),woostifyFilterQuickSearch(),woostifyFilterOrdering(),window.addEventListener("click",function(t){var e=document.querySelectorAll(".filter-area.filter-horizontal .w-product-filter, .w-pro-smart-filter-layout-horizontal .elementor-widget-container .w-product-filter");if(!e.length||e.length<1)return!1;e.forEach(function(e){e.contains(t.target)||e.classList.remove("open")})}),"function"==typeof onElementorLoaded&&onElementorLoaded(function(){window.elementorFrontend.hooks.addAction("frontend/element_ready/woostify-filter-date-range.default",function(){woostifyFilterDatePicker()}),window.elementorFrontend.hooks.addAction("frontend/element_ready/woostify-filter-range-slider.default",function(){var e=document.querySelectorAll(".w-product-filter-type-range-slider");e.length&&e.forEach(function(e){var t,o;"object"!==_typeof(e.noUiSlider)&&(t=Number(e.getAttribute("data-from"))||0,o=Number(e.getAttribute("data-to"))||100,noUiSlider.create(e,{tooltips:!0,connect:!0,start:[t,o],step:1,range:{min:t,max:o},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)}}}))})})})});