"use strict";!function(t,e){var i,n,s,r,a;"object"==typeof window&&(window[t]=(i=window,n=document.body,s=document.documentElement,r=function(t){var e=Math.max(0,i.pageXOffset||s.scrollLeft||n.scrollLeft||0)-(s.clientLeft||0),r=Math.max(0,i.pageYOffset||s.scrollTop||n.scrollTop||0)-(s.clientTop||0),a=t?Math.max(0,t.pageX||t.clientX||0)-e:0,o=t?Math.max(0,t.pageY||t.clientY||0)-r:0;return{x:a,y:o}},(a=function(t,e){if(t&&t instanceof Element){var i=this;i._container=t,i._options=e||{},i._clickItem=null,i._dragItem=null,i._hovItem=null,i._sortLists=[],i._click={},i._dragging=!1,i._container.setAttribute("data-is-sortable",1),i._container.style.position="static",window.addEventListener("mousedown",i._onPress.bind(i),!0),window.addEventListener("touchstart",i._onPress.bind(i),!0),window.addEventListener("mouseup",i._onRelease.bind(i),!0),window.addEventListener("touchend",i._onRelease.bind(i),!0),window.addEventListener("mousemove",i._onMove.bind(i),!0),window.addEventListener("touchmove",i._onMove.bind(i),!0)}}).prototype={constructor:a,toArray:function(t){t=t||"id";for(var e=[],i="",n=0;n<this._container.children.length;++n)i=this._container.children[n].getAttribute(t)||"",e.push(i);return e},toString:function(t,e){return e=e||":",this.toArray(t).join(e)},_isOnTop:function(t,e,i){var n=t.getBoundingClientRect(),s=e>n.left&&e<n.left+n.width,r=i>n.top&&i<n.top+n.height;return s&&r},_itemClass:function(t,e,i){var n=t.className.split(/\s+/),s=n.indexOf(i);"add"===e&&-1==s?(n.push(i),t.className=n.join(" ")):"remove"===e&&-1!=s&&(n.splice(s,1),t.className=n.join(" "))},_swapItems:function(t,e){var i=t.parentNode;if(i==e.parentNode){var n=document.createElement("div");i.insertBefore(n,t),i.insertBefore(t,e),i.insertBefore(e,n),i.removeChild(n)}},_moveItem:function(t,e,i){t.style["-webkit-transform"]="translateX( "+e+"px ) translateY( "+i+"px )",t.style.transform="translateX( "+e+"px ) translateY( "+i+"px )"},_makeDragItem:function(t){this._trashDragItem(),this._sortLists=document.querySelectorAll("[data-is-sortable]"),this._clickItem=t,this._getItemClass=t.getAttribute("class"),this._itemClass(this._clickItem,"add","active"),this._dragItem=document.createElement(t.tagName),this._dragItem.className=this._getItemClass+" dragging",this._dragItem.innerHTML=t.innerHTML,this._dragItem.style.left=(t.offsetLeft||0)+"px",this._dragItem.style.top=(t.offsetTop||0)+"px",this._dragItem.style.width=(t.offsetWidth||0)+"px",this._container.appendChild(this._dragItem)},_trashDragItem:function(){this._dragItem&&this._clickItem&&(this._itemClass(this._clickItem,"remove","active"),this._clickItem=null,this._container.removeChild(this._dragItem),this._dragItem=null)},_onPress:function(t){t&&t.target&&t.target.parentNode===this._container&&0==t.button&&(t.preventDefault(),this._dragging=!0,this._click=r(t),this._makeDragItem(t.target),this._onMove(t))},_getValue:function(){var t=this._container.querySelectorAll(".woostify-multi-select-id"),e=[];if(t.length)for(var i=0,n=t.length;i<n;i++)if(t[i].classList.contains("checked")){var s=t[i].getAttribute("data-value");e.push(s)}return e},_onRelease:function(t){this._dragging=!1,this._trashDragItem();var e=new Event("click"),i=new Event("filterOrder"),n=this._container.nextElementSibling;n.setAttribute("value",this._getValue().join(":")),n.dispatchEvent(e),document.dispatchEvent(i)},_onMove:function(t){if(this._dragItem&&this._dragging){t.preventDefault();var e=r(t),i=this._container;this._moveItem(this._dragItem,e.x-this._click.x,e.y-this._click.y);for(var n=0;n<this._sortLists.length;++n){var s=this._sortLists[n];this._isOnTop(s,e.x,e.y)&&(i=s)}if(this._isOnTop(i,e.x,e.y)&&0===i.children.length)return void i.appendChild(this._clickItem);for(var a=0;a<i.children.length;++a){var o=i.children[a];o!==this._clickItem&&o!==this._dragItem&&this._isOnTop(o,e.x,e.y)&&(this._hovItem=o,this._swapItems(this._clickItem,o))}}}},a),"object"==typeof jQuery&&(jQuery.fn[t]=function(e){return this.each(function(){new window[t](this,e)})}))}("Sortable");
