"use strict";var woostifyAvailableVariations=function(t){var a,e,t=t.closest("#woostify-quick-view-panel")?document.getElementById("woostify-quick-view-panel"):document.getElementById("view");!t||(e=t.querySelectorAll('.variations [name^="attribute_"] option')).length&&(a=[],e.forEach(function(t){var e=t.getAttribute("value");e&&!t.disabled&&a.push(e)}),(e=t.querySelectorAll(".variations .swatch")).length&&e.forEach(function(t){var e=t.getAttribute("data-value");a.includes(e)?t.classList.remove("unavailable"):t.classList.add("unavailable")}))},woostifyVariationSwatches=function(){var t=document.querySelectorAll("form.variations_form");if(t.length)for(var e=0,a=t.length;e<a;e++){var n=t[e],i=n.querySelectorAll(".swatch");if(!i.length)return;var o=[],l=new Event("change",{bubbles:!0}),r=new Event("woostify_no_matching_variations"),i=(i.forEach(function(c){c.onclick=function(t){var e,a,i,s;t.preventDefault(),c.classList.contains("unavailable")||(t=c.closest(".variations"),e=c.closest(".value"),t.querySelectorAll("select"),e=(t=e.querySelector("select")).getAttribute("data-attribute_name")||t.getAttribute("name"),a=c.getAttribute("data-value"),i=t?t.querySelectorAll('option[value="'+a+'"]'):[],s=siblings(c),i.length?(-1===o.indexOf(e)&&o.push(e),c.classList.contains("selected")?(t.value="",c.classList.remove("selected"),delete o[o.indexOf(e)]):(c.classList.add("selected"),s.length&&s.forEach(function(t){t.classList.remove("selected")}),t.value=a),t.dispatchEvent(l)):n.dispatchEvent(r,c))}}),n.querySelector(".reset_variations"));i&&i.addEventListener("click",function(){var t=n.querySelectorAll(".swatch");t.length&&t.forEach(function(t){t.classList.remove("unavailable","selected")}),o=[]}),n.addEventListener("woostify_no_matching_variations",function(){window.alert(wc_add_to_cart_variation_params.i18n_no_matching_variations_text)})}},woostifySwatchList=function(){var t=document.querySelectorAll(".swatch-list");t.length&&t.forEach(function(t){var e=t.closest(".product"),s=e.querySelector(".product-loop-image-wrapper"),c=e.querySelector(".product-loop-image"),e=t.querySelectorAll(".swatch");e.length&&e.forEach(function(e){var a=siblings(e),i=e.getAttribute("data-slug");e.classList.contains("selected")&&(c.setAttribute("srcset",""),c.src=i),e.onclick=function(){c.getAttribute("data-swatch")||c.setAttribute("data-swatch",c.src),s.classList.add("circle-loading"),c.setAttribute("srcset",""),a.length&&a.forEach(function(t){t.classList.remove("selected")}),e.classList.contains("selected")?(e.classList.remove("selected"),c.src=c.getAttribute("data-swatch")):(e.classList.add("selected"),c.src=i);var t=new Image;t.src=i,t.onload=function(){s.classList.remove("circle-loading")}}})})};document.addEventListener("DOMContentLoaded",function(){woostifyVariationSwatches(),woostifySwatchList(),jQuery(document.body).on("check_variations",function(t){woostifyAvailableVariations(t.target)})});