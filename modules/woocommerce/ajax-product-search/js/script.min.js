"use strict";var woostifySearchDelay=function(a){var t=0<arguments.length&&void 0!==a?a:0;return function(a,e){clearTimeout(t),t=setTimeout(a,e)}}();function woostifyAjaxProductSearch(){var a=document.querySelectorAll(".search-field"),h={link:"aps-link",image:"aps-thumbnail",itemTag:'<div class="aps-item">',contentTag:'<div class="asp-content">',priceTag:'<div class="aps-price">',titleTag:'<h4 class="aps-title">',skuTag:'<div class="aps-sku">',closeTag:"</div>",titleClose:"</h4>",categoryClass:'<div class="category-content">',headerTag:'<div class="search-heading">'},g={dataHtml:function(a,e){var t,s,d,o="",r=this,u=jQuery(e).find(".search-dialog-count"),h=a.products,c=a.categories,i=a.tags,l=a.attributes;if(jQuery(".link-search-page").html(a.product_found+" "+woostify_ajax_product_search_data.products),c&&0<c.length){for(o+=r.categoryClass+r.headerTag+woostify_ajax_product_search_data.categories+r.closeTag,t=0,s=c.length;t<s;t++)n=c[t],o+=r.itemTag+'<a class="'+r.link+'" href="'+n.url+'"></a>'+r.contentTag+r.titleTag+n.name_hightline+r.titleClose+r.closeTag+r.closeTag;o+=r.closeTag}if(i&&0<i.length){for(o+=r.categoryClass+r.headerTag+woostify_ajax_product_search_data.tags+r.closeTag,t=0,s=i.length;t<s;t++){var n=i[t];o+=r.itemTag+'<a class="'+r.link+'" href="'+n.url+'"></a>'+r.contentTag+r.titleTag+n.name_hightline+r.titleClose+r.closeTag+r.closeTag}o+=r.closeTag}if(l&&0<l.length){for(o+=r.categoryClass+r.headerTag+woostify_ajax_product_search_data.attributes+r.closeTag,t=0,s=l.length;t<s;t++){n=l[t];o+=r.itemTag+'<a class="'+r.link+'" href="'+n.url+'"></a>'+r.contentTag+r.titleTag+n.name_hightline+r.titleClose+r.closeTag+r.closeTag}o+=r.closeTag}if(0<a.products.length){for(0<u.length?u.html(a.product_found+" "+woostify_ajax_product_search_data.products):(d='<span class="search-dialog-count aps-highlight">'+a.product_found+" "+woostify_ajax_product_search_data.products+"</span>",jQuery(".dialog-search-title").append(d)),o+=r.categoryClass+r.headerTag+woostify_ajax_product_search_data.products+r.closeTag,t=0,s=h.length;t<s;t++){var g="";(n=h[t]).sku_hightline&&(g="SKU: "),o+=r.itemTag+'<a class="'+r.link+'" href="'+n.url+'"></a><img class="'+r.image+'" src="'+n.image+'" alt="'+n.name+'">'+r.contentTag+r.titleTag+n.name_hightline+r.titleClose+r.priceTag+n.html_price+r.closeTag+r.skuTag+g+n.sku_hightline+r.closeTag+r.closeTag+r.closeTag}o+=r.closeTag,e.querySelector(".ajax-search-results").innerHTML=o}e.querySelector(".ajax-search-results").innerHTML=o,0!=a.products.length||i&&0!=i.length||c&&0!=c.length||(e.querySelector(".ajax-search-results").innerHTML='<div class="aps-no-posts-found">'+woostify_ajax_product_search_data.no_product+"</div>",u.html(""))}};a.length&&"undefined"!=typeof woostify_ajax_product_search_data&&a.forEach(function(a){var r,c,i,l,n,e,d=a.closest("form"),a=!!d&&d.classList.contains("woocommerce-product-search"),u=!!d&&d.querySelector(".search-field");d&&a&&u&&(u.setAttribute("autocomplete","off"),r=d.closest(".site-search")||d.closest(".dialog-search-content"),(c=!!r&&r.querySelector(".ajax-search-results"))&&((i=document.createElement("span")).setAttribute("class","clear-search-results ti-close"),u.parentNode.insertBefore(i,u.nextSibling),woostify_ajax_product_search_data.lang&&((a=document.createElement("input")).setAttribute("type","hidden"),a.setAttribute("name","lang"),a.setAttribute("value",woostify_ajax_product_search_data.lang),u.parentNode.insertBefore(a,u.nextSibling)),woostify_ajax_product_search_data.select&&(d.insertAdjacentHTML("afterbegin",woostify_ajax_product_search_data.select),d.classList.add("category-filter")),l=d.querySelector(".ajax-product-search-category-filter"),n=d.querySelector("input[name=lang]"),e=function(){var t,a=void 0!==arguments[0]&&arguments[0],e=l?l.value.trim():"",s=n?n.value.trim():"",o=u.value.trim();if(!o)return i.classList.remove("show"),c.classList.add("hide"),jQuery(r).find(".total-result-wrapper").html(""),void jQuery(r).find(".search-dialog-count").html("");i.classList.add("show"),c.classList.remove("hide"),i.onclick=function(){u.value="",i.classList.remove("show"),c.classList.add("hide"),jQuery(r).find(".total-result-wrapper").html(""),jQuery(r).find(".search-dialog-count").html("")},o===u.getAttribute("data-value")&&!a||(u.setAttribute("data-value",o),d.classList.add("loading"),t=jQuery(d).attr("action")+"?post_type=product&s="+o,e&&(t+="&cat_id="+e),s&&(t+="&lang="+s),a={token:woostify_ajax_product_search_data.ajax_nonce,keyword:o,cat_id:e,lang:s},o=woostify_ajax_product_search_data.url,woostify_ajax_product_search_data.code_snippets&&(o=woostify_ajax_product_search_data.ajax_url,a.action="ajax_product_search",a.ajax_nonce=woostify_ajax_product_search_data.ajax_nonce),jQuery.ajax({type:"GET",url:o,data:a,beforeSend:function(a){jQuery(d).addClass("loading")},success:function(e){jQuery(d).removeClass("loading"),jQuery(r).find(".total-result-wrapper").html(""),0<e.data.products.length&&jQuery(r).find(".total-result-wrapper").html('<a href="'+t+'" class="link-search-page aps-highlight">'+e.data.size+woostify_ajax_product_search_data.products+"</a>"),g.dataHtml.call(h,e.data,r),jQuery(document).on("keyup keypress",function(a){if(13===(a.keyCode||a.which)){if(a.preventDefault(),0==e.data.products.length)return!1;window.location.href=t}})}}))},u.addEventListener("input",function(){woostifySearchDelay(function(){e()},500)}),l&&l.addEventListener("change",function(){e(!0),u.focus()})))})}document.addEventListener("DOMContentLoaded",function(){woostifyAjaxProductSearch()});